function MapInputWidgetManager(){const t=".kolyunya-map-input-widget";var n=Array(),a=function(t){if(!$(t).data("initialized")){var n=new MapInputWidget(t);return n.initialize(),n}return null},i=function(t){var a=t.getId();n[a]=t};this.initializeWidgets=function(){$(t).each(function(t,n){var e=a(n);e&&i(e)})},this.getWidget=function(t){var a=n[t];return a}}function MapInputWidget(t){const n="input.kolyunya-map-input-widget-input",a="div.kolyunya-map-input-widget-canvas";var i,e,o,r=this,u=function(){i=$(t).find(n).get(0),e=$(t).find(a).get(0)},d=function(){o=new google.maps.Map(e,{mapTypeId:$(t).data("map-type"),center:f(),zoom:$(t).data("zoom"),styles:[{featureType:"poi",stylers:[{visibility:"off"}]}],mapTypeControlOptions:{mapTypeIds:[]}}),google.maps.event.addListener(o,"click",function(t){r.setPosition({latitude:t.latLng.lat(),longitude:t.latLng.lng()})}),google.maps.event.addListenerOnce(o,"idle",function(){r.setPosition({latitude:$(t).data("customlat"),longitude:$(t).data("customlng")})})},l=function(){var n=s();r.setPosition(n),$(t).data("initialized",!0)},p=function(t){var n=m(),a=v(t);return n=n.replace(/%latitude%/g,a.lat()),n=n.replace(/%longitude%/g,a.lng())},g=function(){var t=""!=$(i).prop("value");return t},s=function(){var t,n=m(),a=$(i).prop("value");if(""!==a){var e=n.indexOf("%latitude%"),o=n.indexOf("%longitude%"),r=o>e,u=r?0:1,d=r?1:0,l=a.match(/-?\d+(\.\d+)?/g)[u],p=a.match(/-?\d+(\.\d+)?/g)[d];t=new google.maps.LatLng(l,p)}else t=null;return t},c=function(){var n=$(t).data("latitude"),a=$(t).data("longitude"),i=new google.maps.LatLng(n,a);return i},f=function(){var t;return t=g()?s():c()},m=function(){var n=$(t).data("pattern");return n},v=function(t){var n;if(void 0!==t.latitude&&void 0!==t.longitude){var a=t.latitude,i=t.longitude;n=new google.maps.LatLng(a,i)}else n=t;return n};this.initialize=function(){u(),d(),l()},this.getId=function(){var n=$(t).prop("id");return n},this.setPosition=function(n){if(o.marker&&o.marker.setMap(null),null===n)return void $(i).prop("disabled",!0);$(i).prop("disabled",!1);var a=v(n);1===$(t).data("align-map-center")&&o.panTo(a);var e=null;1===$(t).data("animate-marker")&&(e=google.maps.Animation.DROP),o.marker=new google.maps.Marker({map:o,position:a,draggable:!0,animation:e}),google.maps.event.addListener(o.marker,"dragend",function(){r.setPosition(this.getPosition())});var u=($(t).data("pattern"),p(a));$(i).prop("value",u)},this.panTo=function(t){var n=v(t);o.panTo(n)},this.setZoom=function(t){o.setZoom(t)}}var mapInputWidgetManager;$(window).load(function(){mapInputWidgetManager=new MapInputWidgetManager,mapInputWidgetManager.initializeWidgets()});